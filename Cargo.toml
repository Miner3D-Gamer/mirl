[package]
# Info
name = "mirl"
version = "4.5.0"
description = "Miners Rust Lib - A massive collection of ever growing and changing functions, structs, and enums. Check the description for compatibility and toggleable features! (Most of the lib is controlled by flags/features so the lib can continue to be lightweight despite its size)"
# Compiler
rust-version = "1.88.0"
edition = "2021"
# Credit/Misc
license = "MIT"
authors = ["Miner3D"]
keywords = []
repository = "https://github.com/Miner3D-Gamer/mirl"
# Keep cursor files when uploading
include = [
    "Cargo.toml",
    "README.md",
    "LICENSE*",
    "src/**",
    "src/platform/cursors/svg/*.svg",
]
exclude = ["**/_*", "**/*.py"]

[dependencies]
# Enum stuff - Used for iterating the keycodes
strum = { version = ">=0.26", optional = true }
strum_macros = { version = ">=0.26", optional = true }


rand = { version = ">=0.8", optional = true }

device_query = { version = ">=4.0.0", optional = true }

# Discord stuff
reqwest = { version = "0.12", features = ["json", "blocking"], optional = true }
serde_json = { version = "1.0.145", optional = true }
serde = { version = "1.0.228", optional = true }

# dear_mirl_gui = { path = "../dear_mirl_gui", optional = true }

parking_lot = ">=0.12"

# Needed for glyph cache
once_cell = { version = ">=1.4", optional = true }
# Font lib
fontdue = { version = ">=0.9.3", optional = true }
font-kit = { version = "0.11", optional = true }


# Rasterize SVG
resvg = { version = ">=0.45.1", optional = true }


# Other window stuff
raw-window-handle = { version = "0.6.2", optional = true }


# graphics & render
image = { version = ">=0.25.6", optional = true }


# This lib is pretty useful
num-traits = ">=0.2"

# system
[target.'cfg(target_os = "windows")'.dependencies]
windows = { version = "0.48", features = [
    "Win32_Foundation",
    "Win32_Graphics_Gdi",
    "Win32_UI_WindowsAndMessaging",
    "Win32_System_Diagnostics_Debug",
    "Win32_System_SystemInformation",
    "Win32_System_Power",
    "Win32_System_Threading",
    "Win32_System_LibraryLoader",
    "Win32_System_Com",
    "Win32_UI_Shell",
    "Win32_System_Memory",
], optional = true }
winapi = { version = "0.3", features = [
    "winuser",
    "wingdi",
    "shellapi",
    "libloaderapi",
    "minwindef",
    "windef",
], optional = true }

[target.'cfg(target_os = "linux")'.dependencies]
x11 = { "version" = ">=2.18.0", optional = true }

[target.'cfg(not(target_arch = "wasm32"))'.dependencies]
# # console
# crossterm = ">=0.28"

# Fast hashing, used by texture manager
ahash = "0.8.12"

# Create temp files, used by icon changing function
tempfile = { version = ">=3", optional = true }

# MiniFB
minifb = { "version" = ">=0.28.0", optional = true }

# GLFW
glfw = { version = "0.51.0", optional = true }

gl = { version = "0.14.0", optional = true }

[target.'cfg(target_arch = "wasm32")'.dependencies]
wasm-bindgen = "0.2"
#getrandom = { version = "0.3", features = ["wasm_js"] }


# Unused
#minifb = "0.27.0"
# # Make a const value be calculated at compile time
# lazy_static = "1.4"
# # Macro thingy
# paste = "1.0.15"

[features]
# Features enabled by default
default = ["texture_manager_cleanup"]
# Image lib support
imagery = ["image"]
# Linux wayland support (Not yet supported)
wayland = []
# Extra cleanup functions for the texture manager
texture_manager_cleanup = []
# SVG/resvg support
svg_support = ["resvg", "tempfile"]
# Enable all available backends
full_backend_support = [
    "minifb_backend",
    "glfw_backend",
    "svg_support",
    "font_support",
    "keycode_support",
]
# Framework backend using minifb (NOT COMPATIBLE WITH WEB)
minifb_backend = ["minifb", "system", "keycode_support", "keyboard_query"]
# Framework backend using glfw (NOT COMPATIBLE WITH WEB)
glfw_backend = ["glfw", "gl", "system", "keycode_support"]
# Low level system interactions
system = ["x11", "windows", "winapi", "raw-window-handle"]
# Font/fontdue support
font_support = ["fontdue", "once_cell", "font-kit"]
# Enable all features that add content
all = ["default", "imagery", "full_backend_support", "discord_support"]
# Support for the f128 float type
f128 = []
# Support for interacting with they keyboard
keycode_support = ["strum", "strum_macros"]
# If set, the extensions module will be disabled -> This will limit functionality across the entire library
do_not_compile_extension_tuple_support = []
# If set, the misc module will be disabled
do_not_compile_misc = []
keyboard_query = ["device_query"]
# A debug option for showing where the current cursor style will click
cursor_show_hotspot = []
# # Enables some extra rendering features for some structs
# dear_mirl_gui_support = ["dear_mirl_gui"]
discord_support = ["serde_json", "reqwest", "serde"]


# Get the current state of the keyboard
[lib]
name = "mirl"
path = "src/lib.rs"
